(function(e,i){typeof exports=="object"&&typeof module<"u"?module.exports=i(require("@hotwired/stimulus"),require("date-fns")):typeof define=="function"&&define.amd?define(["@hotwired/stimulus","date-fns"],i):(e=typeof globalThis<"u"?globalThis:e||self,e.StimulusTimeago=i(e.Stimulus,e.dateFns))})(this,function(e,i){"use strict";class s extends e.Controller{initialize(){this.isValid=!0}connect(){this.load(),this.hasRefreshIntervalValue&&this.isValid&&this.startRefreshing()}disconnect(){this.stopRefreshing()}load(){const t=this.datetimeValue,a=Date.parse(t),n={includeSeconds:this.hasIncludeSecondsValue,addSuffix:this.hasAddSuffixValue,locale:this.locale};Number.isNaN(a)&&(this.isValid=!1,console.error(`[stimulus-timeago] Value given in 'data-timeago-datetime' is not a valid date (${t}). Please provide a ISO 8601 compatible datetime string. Displaying given value instead.`)),this.element.dateTime=t,this.element.innerHTML=this.isValid?i.formatDistanceToNow(a,n):t}startRefreshing(){this.refreshTimer=setInterval(()=>{this.load()},this.refreshIntervalValue)}stopRefreshing(){this.refreshTimer&&clearInterval(this.refreshTimer)}}return s.values={datetime:String,refreshInterval:Number,includeSeconds:Boolean,addSuffix:Boolean},s});
